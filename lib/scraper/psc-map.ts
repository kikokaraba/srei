/**
 * Mapovanie slovenského PSČ (prvé 3 číslice) na mesto
 * Používa sa pri extrakcii lokality z textu keď je v inzeráte PSČ
 */

export const PSC_PREFIX_TO_CITY: Record<string, string> = {
  // Bratislava a okolie
  "801": "Bratislava",
  "802": "Bratislava",
  "803": "Bratislava",
  "804": "Bratislava",
  "805": "Bratislava",
  "806": "Bratislava",
  "807": "Bratislava",
  "808": "Bratislava",
  "809": "Bratislava",
  "810": "Bratislava",
  "811": "Bratislava",
  "821": "Bratislava",
  "831": "Bratislava",
  "841": "Bratislava",
  "851": "Bratislava",
  "900": "Bratislava",
  "901": "Bratislava",
  "902": "Bratislava",
  "903": "Bratislava",
  "904": "Bratislava",
  "905": "Bratislava",
  "906": "Bratislava",
  "907": "Bratislava",
  "908": "Bratislava",
  "909": "Bratislava",
  "010": "Žilina",
  "011": "Žilina",
  "012": "Žilina",
  "013": "Žilina",
  "014": "Žilina",
  "015": "Žilina",
  "016": "Žilina",
  "017": "Žilina",
  "018": "Žilina",
  "019": "Žilina",
  "023": "Považská Bystrica",
  "031": "Liptovský Mikuláš",
  "032": "Ružomberok",
  "033": "Liptovský Mikuláš",
  "034": "Liptovský Mikuláš",
  "035": "Martin",
  "036": "Martin",
  "037": "Martin",
  "038": "Martin",
  "039": "Martin",
  "040": "Košice",
  "041": "Košice",
  "042": "Košice",
  "043": "Košice",
  "044": "Košice",
  "045": "Košice",
  "046": "Košice",
  "047": "Košice",
  "048": "Košice",
  "049": "Košice",
  "050": "Prešov",
  "051": "Prešov",
  "052": "Spišská Nová Ves",
  "053": "Spišská Nová Ves",
  "054": "Levoča",
  "055": "Kežmarok",
  "056": "Poprad",
  "057": "Poprad",
  "058": "Poprad",
  "059": "Poprad",
  "060": "Prešov",
  "061": "Prešov",
  "062": "Prešov",
  "063": "Prešov",
  "064": "Prešov",
  "065": "Prešov",
  "066": "Humenné",
  "067": "Humenné",
  "068": "Snina",
  "069": "Sobrance",
  "070": "Prešov",
  "071": "Michalovce",
  "072": "Michalovce",
  "073": "Trebišov",
  "074": "Trebišov",
  "075": "Trebišov",
  "076": "Trebišov",
  "077": "Košice",
  "078": "Košice",
  "079": "Košice",
  "080": "Prešov",
  "081": "Prešov",
  "082": "Prešov",
  "083": "Prešov",
  "084": "Prešov",
  "085": "Bardejov",
  "086": "Bardejov",
  "087": "Vranov nad Topľou",
  "088": "Humenné",
  "089": "Snina",
  "911": "Trenčín",
  "912": "Trenčín",
  "913": "Trenčín",
  "914": "Trenčín",
  "915": "Trenčín",
  "916": "Trenčín",
  "917": "Trnava",
  "918": "Trnava",
  "919": "Trnava",
  "920": "Trnava",
  "921": "Piešťany",
  "922": "Trnava",
  "923": "Trnava",
  "924": "Trnava",
  "925": "Trnava",
  "926": "Trnava",
  "927": "Trnava",
  "928": "Trnava",
  "929": "Trnava",
  "930": "Nitra",
  "949": "Nitra",
  "950": "Nitra",
  "951": "Nitra",
  "952": "Nitra",
  "960": "Zvolen",
  "961": "Zvolen",
  "962": "Zvolen",
  "963": "Zvolen",
  "964": "Zvolen",
  "965": "Zvolen",
  "966": "Zvolen",
  "967": "Zvolen",
  "968": "Zvolen",
  "969": "Zvolen",
  "970": "Banská Bystrica",
  "971": "Prievidza",
  "972": "Prievidza",
  "973": "Prievidza",
  "974": "Banská Bystrica",
  "975": "Banská Bystrica",
  "976": "Banská Bystrica",
  "977": "Banská Bystrica",
  "978": "Banská Bystrica",
  "979": "Banská Bystrica",
};

/**
 * Extrahuje PSČ z textu (5 číslic: XXX XX alebo XXXXX) a vráti mesto ak je v mape.
 */
export function getCityFromPsc(text: string): string | null {
  const match = text.match(/(\d{3})\s?\d{2}/);
  if (!match) return null;
  const prefix = match[1];
  return PSC_PREFIX_TO_CITY[prefix] ?? null;
}
